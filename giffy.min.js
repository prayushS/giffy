var giffy=function(e){"use strict";var t,a,o,i,n=document.querySelectorAll(".giffy"),s=[],l={applyCss:function(e,t){for(var a in t)e.style[a]=t[a]},addClass:function(e,t){e.className+=t+" "},removeClass:function(e,t){e.className=e.className.replace(t,"")}};s.overlay={height:"100%","max-height":"100%",width:"100%","max-width":"100%","background-color":"#000",margin:"0px auto",padding:"0px",position:"fixed",top:"0",left:"0",opacity:"0.99",filter:"alpha(opacity=99)","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=99)","-khtml-opacity":"0.99","-moz-opacity":"0.99",cursor:"pointer",visibility:"visible"},s.sharedStyles={"-moz-box-sizing":"content-box","-webkit-box-sizing":"content-box","box-sizing":"content-box",display:"block"},e={version:1.01,init:function(){d();for(var e=0;e<n.length;e++)c(n[e])}},l.openModal=function(e){t.hasChildNodes()||(t.appendChild(e),l.addClass(document.body,"giffy-active"),l.addClass(t,"active"),l.addClass(a,"overlay-active"),l.applyCss(a,s.overlay))},l.closeModal=function(){t.classList.contains("active")&&(l.removeClass(document.body,"giffy-active"),l.removeClass(t,"active"),l.removeClass(a,"overlay-active"),i=document.getElementById("loadedImage"),i.parentNode.removeChild(i),t.removeAttribute("style"),a.removeAttribute("style"))},l.bind=function(e){e.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),r(this)},!1),window.addEventListener("keyup",function(e){t(e)},!1),a.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),l.closeModal()},!1);var t=function(e){var t=document.activeElement;(27==e.keyCode&&"giffy"==t.classList[0]||"giffy-active"==t.classList[0])&&l.closeModal()}};var d=function(){a=document.createElement("div"),t=document.createElement("div"),o=document.createElement("div"),l.addClass(a,"overlay"),l.addClass(t,"modal"),l.addClass(o,"giffyWrapper"),o.appendChild(a),o.appendChild(t),document.body.appendChild(o)},c=function(e){var t=e.getAttribute("data-link"),a=new Image;a.onload=function(){l.addClass(e," preloaded"),l.bind(e)},a.src=t},r=function(e){var o=e.getAttribute("data-link"),i=new Image;i.id="loadedImage",i.onload=function(){i.height=this.height,i.width=this.width,l.applyCss(t,s.sharedStyles),l.applyCss(t,{display:"block","background-color":"#222",border:"5px solid #fff",cursor:"default",height:i.height+"px",width:i.width+"px",position:"absolute",top:"0px",right:"0px",bottom:"0px",left:"0px",margin:"auto","float":"none"}),l.applyCss(i,{"float":"none"})},i.src=o,l.openModal(i),l.applyCss(a,s.sharedStyles),l.applyCss(a,s.overlay)};return e}(giffy);